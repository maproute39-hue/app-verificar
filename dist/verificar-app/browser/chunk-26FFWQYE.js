import{a as j}from"./chunk-R5QQV4QD.js";import"./chunk-4KAPM5UD.js";import{c as A,d as P,f as R}from"./chunk-FVGSNUYN.js";import{a as O,c as z,f as B,o as W}from"./chunk-JGLXA5XB.js";import{$a as b,Ba as _,Ga as v,Ib as F,Jb as N,Ka as g,Kb as V,Mb as D,Ob as L,Ra as h,Sa as t,Ta as i,U as d,Ua as a,V as u,Ya as I,Za as m,fb as r,gb as f,hb as x,ib as w,jb as S,kb as E,lb as y,nb as k,ob as C,pb as M,rb as T,ta as c}from"./chunk-YFYCQ3T5.js";var q=()=>["approved","rejected"],G=(l,n,e)=>({"bg-success":l,"bg-warning":n,"bg-soft-primary":e});function H(l,n){if(l&1){let e=I();t(0,"tr",32),m("click",function(){let s=d(e).$implicit,p=b();return u(p.viewInspection(s.id_inspeccion))}),t(1,"td",24)(2,"div",33)(3,"input",34),m("click",function(s){return d(e),u(s.stopPropagation())}),i()()(),t(4,"td")(5,"div",35)(6,"div",36),a(7,"i",37),i(),t(8,"span",38),r(9),i()()(),t(10,"td")(11,"span",39),r(12),i()(),t(13,"td")(14,"span",20),r(15),i()(),t(16,"td")(17,"span",20),r(18),M(19,"date"),i()(),t(20,"td")(21,"span",40),r(22),i()(),t(23,"td",41)(24,"div",42)(25,"button",43),m("click",function(s){let p=d(e).$implicit,$=b();return s.stopPropagation(),u($.viewInspection(p.id_inspeccion))}),a(26,"i",44),i(),t(27,"button",45),m("click",function(s){return d(e),u(s.stopPropagation())}),a(28,"i",46),i(),t(29,"button",47),m("click",function(s){return d(e),u(s.stopPropagation())}),a(30,"i",48),i()()()()}if(l&2){let e=n.$implicit;c(9),f(e.nombres_conductor||"N/A"),c(3),f(e.placa||"N/A"),c(3),f(e.telefono||"N/A"),c(3),f(e.fecha_inspeccion?T(19,6,e.fecha_inspeccion,"dd/MM/yyyy"):"N/A"),c(3),h("ngClass",C(10,G,e.estado==="approved",e.estado==="rejected",!k(9,q).includes(e.estado))),c(),x(" ",e.status||"N/A"," ")}}function J(l,n){l&1&&(t(0,"tr")(1,"td",49)(2,"div",50),a(3,"i",51),t(4,"p",19),r(5,"No se encontraron inspecciones"),i(),t(6,"small",20),r(7,"Intenta con otros t\xE9rminos de b\xFAsqueda"),i()()()())}var Y=class l{constructor(n,e){this.realtimeInspectionsService=n;this.router=e}inspections=[];totalInspections=0;currentMonthInspections=0;filteredInspections=[];searchTerm="";ngOnInit(){this.initializeData()}initializeData(){this.realtimeInspectionsService.inspections$.subscribe({next:n=>{this.inspections=n,this.filteredInspections=[...n],this.totalInspections=n.length,this.currentMonthInspections=n.filter(e=>{if(!e.fecha_inspeccion)return!1;let o=new Date(e.fecha_inspeccion),s=new Date;return o.getMonth()===s.getMonth()&&o.getFullYear()===s.getFullYear()}).length},error:n=>{console.error("Error al cargar inspecciones:",n)}})}onSearch(){if(!this.searchTerm.trim()){this.filteredInspections=[...this.inspections];return}let n=this.searchTerm.toLowerCase().trim();this.filteredInspections=this.inspections.filter(e=>e.id_inspeccion?.toLowerCase().includes(n)||e.estado?.toLowerCase().includes(n)||e.vehiculo?.placa?.toLowerCase().includes(n)||e.vehiculo?.marca?.toLowerCase().includes(n)||e.vehiculo?.modelo?.toLowerCase().includes(n))}viewInspection(n){this.router.navigate(["/inspeccion",n])}static \u0275fac=function(e){return new(e||l)(_(j),_(A))};static \u0275cmp=v({type:l,selectors:[["app-inspections"]],decls:48,vars:5,consts:[[1,"app-wrapper"],[1,"container-fluid"],[1,"app-page-head","d-flex","align-items-center","justify-content-between"],["aria-label","breadcrumb"],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item"],["routerLink","/"],[1,"fi","fi-rr-home"],["aria-current","page",1,"breadcrumb-item","active"],[1,"d-flex","gap-2"],[1,"search-box"],["type","text","placeholder","Buscar inspecciones...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"fi","fi-rr-search"],["type","button","routerLink","/nueva",1,"btn","btn-primary"],[1,"fi","fi-rr-plus","me-1"],[1,"row"],[1,"col-12"],[1,"card"],[1,"card-header","d-flex","align-items-center","justify-content-between"],[1,"mb-0"],[1,"text-muted"],[1,"card-body","px-1","pt-2","pb-2"],["id","dt_Inspections",1,"table","table-sm","display","table-row-rounded","data-row-checkbox"],[1,"table-light"],[1,"pe-0"],[1,"form-check"],["data-row-checkbox","","type","checkbox",1,"form-check-input"],[1,"minw-200px"],[1,"minw-150px"],[1,"minw-125px"],["style","cursor: pointer;",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[2,"cursor","pointer",3,"click"],[1,"form-check","p-0","w-auto","d-inline-block","mb-0","mb-n1"],["data-checkbox","","type","checkbox",1,"form-check-input","m-0",3,"click"],[1,"d-flex","align-items-center"],[1,"avatar","avatar-circle","avatar-xs","me-2"],[1,"fi","fi-rr-user"],[1,"fw-semibold"],[1,""],[1,"",3,"ngClass"],[1,"text-center"],[1,"d-flex","gap-2","justify-content-center"],["title","Ver",1,"btn","btn-sm","btn-icon","btn-soft-primary",3,"click"],[1,"fi","fi-rr-eye"],["title","Editar",1,"btn","btn-sm","btn-icon","btn-soft-info",3,"click"],[1,"fi","fi-rr-edit"],["title","Eliminar",1,"btn","btn-sm","btn-icon","btn-soft-danger",3,"click"],[1,"fi","fi-rr-trash"],["colspan","9",1,"text-center","py-4"],[1,"d-flex","flex-column","align-items-center"],[1,"fi","fi-rr-search-alt","text-muted","mb-2",2,"font-size","2rem"]],template:function(e,o){e&1&&(t(0,"main",0)(1,"div",1)(2,"div",2)(3,"nav",3)(4,"ol",4)(5,"li",5)(6,"a",6),a(7,"i",7),r(8," Inicio "),i()(),t(9,"li",8),r(10,"Listado de Inspecciones"),i()()(),t(11,"div",9)(12,"div",10)(13,"input",11),y("ngModelChange",function(p){return E(o.searchTerm,p)||(o.searchTerm=p),p}),m("input",function(){return o.onSearch()}),i(),a(14,"i",12),i(),t(15,"button",13),a(16,"i",14),r(17," Nueva Inspecci\xF3n "),i()()(),t(18,"div",15)(19,"div",16)(20,"div",17)(21,"div",18)(22,"h5",19),r(23,"Inspecciones"),i(),t(24,"div",20),r(25),i()(),t(26,"div",21)(27,"table",22)(28,"thead",23)(29,"tr")(30,"th",24)(31,"div",25),a(32,"input",26),i()(),t(33,"th",27),r(34,"Conductor"),i(),t(35,"th",28),r(36,"Placa del veh\xEDculo"),i(),t(37,"th",28),r(38,"Tel\xE9fono"),i(),t(39,"th",29),r(40,"Fecha"),i(),t(41,"th"),r(42,"Status"),i(),t(43,"th"),r(44,"Acci\xF3n"),i()()(),t(45,"tbody"),g(46,H,31,14,"tr",30)(47,J,8,0,"tr",31),i()()()()()()()()),e&2&&(c(13),S("ngModel",o.searchTerm),c(12),w(" Total: ",o.totalInspections," | Este mes: ",o.currentMonthInspections," "),c(21),h("ngForOf",o.filteredInspections),c(),h("ngIf",o.filteredInspections.length===0))},dependencies:[L,F,N,V,R,P,W,O,z,B,D],encapsulation:2})};export{Y as Inspections};
